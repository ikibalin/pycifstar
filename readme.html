<!DOCTYPE html>
<html>
<head>
<title>readme.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: "Segoe WPC", "Segoe UI", "SFUIText-Light", "HelveticaNeue-Light", sans-serif, "Droid Sans Fallback";
	font-size: 14px;
	padding: 0 12px;
	line-height: 22px;
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}


body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	color: #4080D0;
	text-decoration: none;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

h1 code,
h2 code,
h3 code,
h4 code,
h5 code,
h6 code {
	font-size: inherit;
	line-height: auto;
}

a:hover {
	color: #4080D0;
	text-decoration: underline;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left: 5px solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 14px;
	line-height: 19px;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

.mac code {
	font-size: 12px;
	line-height: 18px;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

/** Theming */

.vscode-light,
.vscode-light pre code {
	color: rgb(30, 30, 30);
}

.vscode-dark,
.vscode-dark pre code {
	color: #DDD;
}

.vscode-high-contrast,
.vscode-high-contrast pre code {
	color: white;
}

.vscode-light code {
	color: #A31515;
}

.vscode-dark code {
	color: #D7BA7D;
}

.vscode-light pre:not(.hljs),
.vscode-light code > div {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre:not(.hljs),
.vscode-dark code > div {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre:not(.hljs),
.vscode-high-contrast code > div {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

.vscode-light blockquote,
.vscode-dark blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.vscode-high-contrast blockquote {
	background: transparent;
	border-color: #fff;
}
</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family:  "Meiryo", "Segoe WPC", "Segoe UI", "SFUIText-Light", "HelveticaNeue-Light", sans-serif, "Droid Sans Fallback";
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

</head>
<body>
<h1 id="pystar">PyStar</h1>
<hr>
<p><a href="https://github.com/ikibalin/PyStar" title="GitHub link on PyStar">PyStar</a> is  a class library for  data manipulation  provided in the Self Defining Text Archival and Retrieval (STAR). The STAR syntax provides a way for simple, easy-to-comprehend, flexible and extensible data exchange (<a href="https://pubs.acs.org/doi/pdf/10.1021/ci00002a020" title="The STAR File: A New Fomat for Electronic Data Transfer and Archiving, J. Chem. Inf. Comput. Sci.1991312326-333">Hall, 1991</a>, <a href="https://pubs.acs.org/doi/pdf/10.1021/ci00019a005" title="The STAR File: detailed specifications, J. Chem. Inf. Comput. Sci.1994343505-508">Hall, 1994</a>). The syntax permits most types of data items, data structures and data cells. The STAR format is the basis for the Crystallographic Information File (CIF), which is widely used in crystallography for data archiving and exchange.</p>
<table>
<thead>
<tr>
<th>Folder</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>PyStar</td>
<td style="text-align:left">library</td>
</tr>
<tr>
<td>example</td>
<td style="text-align:left">examples</td>
</tr>
<tr>
<td>docs</td>
<td style="text-align:left">documentation</td>
</tr>
</tbody>
</table>
<h2 id="main-features">Main Features</h2>
<ul>
<li>a simple data manipulation;</li>
<li>a manipulation with comment text;</li>
</ul>
<h2 id="installation-of-pystar">Installation of <em>PyStar</em></h2>
<p><a href="https://github.com/ikibalin/PyStar" title="GitHub link on PyStar">PyStar</a> is developed and tested using Python 3.7. They can be installed by:</p>
<pre class="hljs"><code><div>python -m pip install ...  <span class="hljs-comment"># as root (in Windows OS)</span>
</div></code></pre>
<p>If you have downloaded a source tarball you can install <a href="https://github.com/ikibalin/PyStar" title="GitHub link on PyStar">PyStar</a> by doing the following:</p>
<pre class="hljs"><code><div>python setup.py develop <span class="hljs-comment"># as root</span>
</div></code></pre>
<p>And then just import a library in a python code:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> pystar
</div></code></pre>
<h2 id="usage">Usage</h2>
<h3 id="reading-a-star-file-to-an-object">Reading a STAR File to an object:</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> pystar
f_name = <span class="hljs-string">"example.cif"</span>
star_object = pystar.read_star_file(f_name)
<span class="hljs-comment">#or </span>
star_object = pystar.read_file(f_name)
</div></code></pre>
<h3 id="access-to">Access to ...</h3>
<h4 id="item-by-items-name">... item by item's name</h4>
<pre class="hljs"><code><div><span class="hljs-comment">#if data block is unique</span>
item = star_object[<span class="hljs-string">"_cell_length_a"</span>]

<span class="hljs-comment">#if data block is not unique</span>
item = star_object[<span class="hljs-string">"Fe3O4_cell_length_a"</span>]
print(item.name, item.value, item.comment)
</div></code></pre>
<h4 id="items-by-items-prefix">... items by items' prefix</h4>
<pre class="hljs"><code><div>items = star_object[<span class="hljs-string">"_cell_length"</span>]
print(items.names, items.values, items.comments)
</div></code></pre>
<h4 id="one-level-loop-by-loops-prefix">... one-level loop by loop's prefix</h4>
<pre class="hljs"><code><div>loop = star_object[<span class="hljs-string">"_atom_site"</span>]
print(loop.names, loop.values, loop.comment_values, loop.comment_names)
</div></code></pre>
<p><em>Note:</em> multi-level loops are not supported.</p>
<h4 id="data-block-by-blockname">... data block by blockname</h4>
<pre class="hljs"><code><div>data_block = star_object[<span class="hljs-string">"Fe3O4"</span>]
print(data_block.name, data_block.items, data_block.loops, data_block.saves, data_block.comment)
</div></code></pre>
<h3 id="a-data-manipulation">A data manipulation</h3>
<h4 id="creation">Creation ...</h4>
<pre class="hljs"><code><div>item = pystar.Item(name=<span class="hljs-string">"_jh"</span>, value=<span class="hljs-string">"sf"</span>, comment=<span class="hljs-string">"jhklj"</span>)
loop = pystar.Loop(names=(<span class="hljs-string">"_jh_2"</span>, <span class="hljs-string">"_jh_zzz"</span>), values=((<span class="hljs-string">"1"</span>, <span class="hljs-string">"2"</span>), (<span class="hljs-string">"11"</span>, <span class="hljs-string">"22"</span>), (<span class="hljs-string">"111"</span>, <span class="hljs-string">"222"</span>)))

data_block = pystal.DataBlock()
data_block.app_item(item)
data_block.app_loop(loop)
</div></code></pre>
<h4 id="correction">Correction ...</h4>
<pre class="hljs"><code><div>star_object[<span class="hljs-string">"_cell_length_a"</span>] = <span class="hljs-number">8.3</span>
<span class="hljs-comment">#or </span>
star_object[<span class="hljs-string">"_cell_length_a"</span>].value = <span class="hljs-number">8.3</span>

star_object[<span class="hljs-string">"_cell_length_a"</span>].comment = <span class="hljs-string">"comment line"</span>
</div></code></pre>
<h4 id="saving">Saving ...</h4>
<pre class="hljs"><code><div>data_block.save_to_star_file(<span class="hljs-string">"out.cif"</span>)
<span class="hljs-comment">#or</span>
data_block.save(<span class="hljs-string">"out.cif"</span>)
</div></code></pre>
<h2 id="the-syntax-of-the-star-file">The syntax of the STAR File</h2>
<p>In the section shorts extracts with small changes are reproduced from &quot;International Tables for Crystallography, Volume G, Definition and Exchange of Crystallographic Data, Edited by Sydney Hall and Brian McMahon, First edition, published for the International Union of Crystallography by Springer 2005&quot;. A more rigorous description of the STAR File syntax is given in (<a href="https://pubs.acs.org/doi/pdf/10.1021/ci00002a020" title="The STAR File: A New Fomat for Electronic Data Transfer and Archiving, J. Chem. Inf. Comput. Sci.1991312326-333">Hall, 1991</a> and <a href="https://pubs.acs.org/doi/pdf/10.1021/ci00019a005" title="The STAR File: detailed specifications, J. Chem. Inf. Comput. Sci.1994343505-508">Hall, 1994</a>).</p>
<p>A STAR File is a sequential file containing lines of standard ASCII characters. A file may be divided into any number of discrete sets of unique data items. Sets may be in the form of data blocks, global blocks or save frames.</p>
<h3 id="item">Item</h3>
<p>A data item is a data value and its associated data name. Each data item stored in a STAR File is specified with this combination. A data name (or tag) is the identifier of a data value and is a sequence of non-white-space characters starting with an underscore character &quot;_&quot;. A data value is a text string.</p>
<pre class="hljs"><code><div>_publication_author_name  &quot;Patrick O’Connor&quot;
_publication_author_address  
; School of CSSE
UWA
;
</div></code></pre>
<h3 id="loop">Loop</h3>
<p>A looped list consists of the keyword <code>loop_</code> followed by</p>
<ul>
<li>a sequence of data names (possibly with nested <code>loop_</code> constructs);</li>
<li>a sequence of loop packets, each containing data values which are identified in the same order as the data names.</li>
</ul>
<p>A looped list specifies a table of data in which the data names represent the ‘header descriptors’ for columns of data and the packets represent the rows in the table. Looped lists may be nested to any level. Each loop level is initialized with the <code>loop_</code> keyword and is followed by the names of data items in this level. Data values that follow the nested data declarations must be in exact multiples of the number of data names. Each loop level must be terminated with a <code>stop_</code>, except the outermost (level 1) which is terminated by either a new data item or the privileged strings indicating a save frame, a data block, a global block or an end of file The attributes of data sets are as follows.</p>
<p>An example of a simple one-level loop structure is:</p>
<pre class="hljs"><code><div>loop_
_atom_identity_number
_atom_type_symbol 
1 C 
2 C 
3 O
</div></code></pre>
<p>Nested (multi-level) looped lists contain matching data packets and an additional <code>stop_</code> to terminate each level of data. Here is a simple example of a two-level nested list.</p>
<pre class="hljs"><code><div>loop_
_atom_id_number
_atom_type_symbol
 loop_
 _atom_bond_id_1
 _atom_bond_id_2
 _atom_bond_order
  1 C    1  2 single       1 3 double stop_
  2 C    2  1 single stop_
  3 O    3  1 double stop_
</div></code></pre>
<h3 id="save-frame">Save frame</h3>
<p>A save frame is a set of unique data items wholly contained within a data block. The frame starts with a <code>save_framecode</code> statement, where the framecode is a unique identifying code within the data block. Each frame is closed with a <code>save_</code> statement.</p>
<p>A save frame has the following attributes:</p>
<ul>
<li>A save frame may contain data items and loop structures but not other save frames.</li>
<li>The scope of the data specified in a save frame is the save frame in which it is specified.</li>
<li>Data values in a save frame are distinct from any identical items in the parent data block.</li>
<li>A save frame may be referenced within the data block in which it is specified using a data item with a value of <code>$framecode</code> .</li>
<li>A frame code must be unique within a data block.</li>
<li>A save frame may not contain another save frame, but it may contain references to other save frames in the same data block using frame codes</li>
</ul>
<pre class="hljs"><code><div>data_example

save_phenyl
_object_class   molecular_fragment

loop_
_atom_identity_node
_atom_identity_symbol 
 1 C 2 C 3 C 4 C 5 C 6 C
save_

loop_ _molecular_fragments $ethyl $phenyl $methyl
</div></code></pre>
<h3 id="data-block">Data block</h3>
<p>A data block is a set of data containing any number of unique items and save frames. A data block begins with a <code>data_</code> block code statement, where block code is a unique identifying name within a file. A data block is closed by another <code>data_</code> block code statement, a <code>global_</code> statement or an end of file.</p>
<p>A data block has the following attributes:</p>
<ul>
<li>A block code must be unique within the file containing the data block.</li>
<li>Data blocks may not be referenced from within a file.</li>
<li>The scope of data specified in a data block is the data block. The value of a data item is always associated with the data block in which it is specified.</li>
<li>Data specifications in a data block are unique, except they may be repeated within a save frame. Data specifications in a save frame are independent of the parent data block specifications.</li>
<li>If a data item is not specified in a given data block, the global value is assumed. If a global value is not specified, the value is unknown.</li>
</ul>
<h3 id="global-block">Global block</h3>
<p>A global block is a set of data items which are implied to be present in all data blocks which follow in a file, unless specified explicitly within a data block. A global block starts with a <code>global_</code> keyword and is closed by a <code>data_</code> blockcode statement or an end of file.</p>
<p>A global block has the following attributes:</p>
<ul>
<li>The scope of global data is from the point of declaration to the end of file.</li>
<li>A global block may contain data items, loop structures and save frames.</li>
<li>Multiple global blocks are concatenated to form a single block in which the last item specification has precedence.</li>
<li>A data item specified within a data block has precedence over a data item specified in a prior global block.</li>
</ul>
<h3 id="data-sets-and-scopes">Data sets and scopes</h3>
<p>A data set is the generic term for a unique set of data. A STAR
File may contain three types of data sets: global blocks,data blocks
and save frames. The attributes of data sets are as follows.</p>
<ul>
<li>A file may contain any number of data sets.</li>
<li>The data names defined within a data set must be unique to that set. That is, all <code>data_</code> blockcode names must be unique within the file, all data names must be unique within a <code>global_</code> block, all data names and <code>save_framecode</code> s must be unique within a data block, and all data names must be unique within a save frame.</li>
<li>The scope of data sets is hierarchical. Global blocks encompass all following data blocks; data blocks scope all contained save frames.</li>
<li>The scope of a save frame is all data items contained within the frame.</li>
<li>The scope of a data block is the boundaries of the data block,i.e. the end of the file or the start of the next data block, including any contained save frames. The same data item may be defined within a save frame and within the parent data block. All specifications of this item will be recognized when accessing the data block.</li>
<li>The scope of a global block is the file, from the point of invocation to the end of file or the start of the next global block. It encompasses all contained global data items, data blocks and save frames. Globally specified data are active provided identical items are not specified in subsequent data sets.</li>
</ul>
<h3 id="privileged-constructs">Privileged constructs</h3>
<p>The following constructs are privileged.</p>
<ul>
<li>Text strings starting with the character sequences <code>data_</code>, <code>loop_</code>, <code>global_</code>, <code>save_</code> or <code>stop_</code> are privileged words (keywords) and may not be used as values in text strings.</li>
<li>A sharp character &quot;#&quot; (ASCII 35) is an explicit end-of-line signal provided it is not contained within a text string. Characters on the same line and following an active sharp character are considered as comment text.</li>
</ul>
<h3 id="using-stop-in-looped-lists">Using <code>stop_</code> in looped lists</h3>
<p>The <code>stop_</code> construction can be applied in the looped list of data names to terminate a loop of data values and to return the looped list to the next outer nesting level. The following, although not particularly intuitive, is a valid construction.</p>
<pre class="hljs"><code><div>loop_
_atom_id_number
 loop_
 _atom_bond_id_1
 _atom_bond_id_2
 _atom_bond_order stop_
_atom_type_symbol
1    1 2 single     1 3 double  stop_  C
2    2 1 single  stop_  C
3    3 1 double  stop_  O
</div></code></pre>
<h2 id="collaboration">Collaboration</h2>
<p>If you have any suggestions, bug reports or annoyances please report them to our issue tracker at <a href="https://github.com/ikibalin/PyStar" title="GitHub link on PyStar">site</a>.</p>
<h2 id="copyright-and-license">Copyright and License</h2>
<p>MIT License</p>
<p>Copyright (c) 2018-2019 Iurii Kibalin<br>
https://github.com/ikibalin/PyStar</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the &quot;Software&quot;), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</p>

</body>
</html>
